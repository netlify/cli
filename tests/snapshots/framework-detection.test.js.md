# Snapshot report for `tests/framework-detection.test.js`

The actual snapshot is saved in `framework-detection.test.js.snap`.

Generated by [AVA](https://avajs.dev).

## should default to process.cwd() and static server

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ No app server detected and no "command" specified␊
    ◈ Using current working directory␊
    ◈ Unable to determine public folder to serve files from␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-index-file"␊
    ␊
    ◈ Server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use static server when --dir flag is passed

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because --dir flag was specified␊
    ◈ Running static server from "site-with-index-file/public"␊
    ␊
    ◈ Server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use static server when framework is set to #static

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ No app server detected and no "command" specified␊
    ◈ Using current working directory␊
    ◈ Unable to determine public folder to serve files from␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-index-file"␊
    ␊
    ◈ Server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should report error if using static server and `command` is configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because --dir flag was specified␊
    ◈ Running static server from "site-with-index-file/public"␊
    ◈ "command" option cannot be used in conjunction with "dir" flag which is used to run a static server`

## should error if using static server and `targetPort` is configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because --dir flag was specified␊
    ◈ Running static server from "site-with-index-file/public"␊
    ◈ "targetPort" option cannot be used in conjunction with "dir" flag which is used to run a static server`

## should error when `command` and `targetPort` when configured, but framework is not

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ "framework" option must be set to "#custom" when specifying both "command" and "targetPort" options`

## should error when a specific framework is configured but not detected

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Specified "framework" detector "create-react-app" did not pass requirements for your project`

## should throw when forcing a non supported framework

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Unsupported value provided for "framework" option in config. Please use "#custom" if you're using a framework not intrinsically supported by Netlify Dev. E.g. with "command" and "targetPort" options. Or use one of following values: "angular", "brunch", "create-react-app", "docusaurus", "eleventy", "ember", "expo", "gatsby", "gridsome", "hexo", "hugo", "jekyll", "middleman", "next", "nuxt", "parcel", "phenomic", "quasar-v0.17", "quasar", "react-static", "redwoodjs", "sapper", "stencil", "svelte-kit", "svelte", "vite", "vue", "vuepress"`

## should detect a known framework

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Starting Netlify Dev with create-react-app␊
    ␊
    > start␊
    > react-scripts start␊
    ␊
    ◈ Command failed with exit code *: npm start. Shutting down Netlify Dev server`

## should throw if framework=#custom but command is missing

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ "command" and "targetPort" properties are required when "framework" is set to "#custom"`

## should throw if framework=#custom but targetPort is missing

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ "command" and "targetPort" properties are required when "framework" is set to "#custom"`

## should start custom command if framework=#custom, command and targetPort are configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Overriding command with setting derived from netlify.toml [dev] block: echo hello␊
    ◈ Starting Netlify Dev with #custom␊
    hello␊
    ◈ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should print specific error when command doesn't exist

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Overriding command with setting derived from netlify.toml [dev] block: oops-i-did-it-again forgot-to-use-a-valid-command␊
    ◈ Starting Netlify Dev with #custom␊
    ◈ Failed launching framework server. Please verify 'oops-i-did-it-again' exists`

## should prompt when multiple frameworks are detected

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ? Multiple possible start commands found (Use arrow keys or type to search)␊
    > [create-react-app] npm start ␊
      [gatsby] npm start ␊
      [gatsby] npm develop [3A[23D[75C[3B[2K[1A[2K[1A[2K[1A[2K[G? Multiple possible start commands found ␊
      [create-react-app] npm start ␊
    > [gatsby] npm start ␊
      [gatsby] npm develop [3A[23D[41C[3B[2K[1A[2K[1A[2K[1A[2K[G? Multiple possible start commands found gatsby-start[53D[53C␊
    Add \`framework = "gatsby"\` to [dev] section of your netlify.toml to avoid this selection prompt next time␊
    ◈ Starting Netlify Dev with gatsby␊
    ␊
    > start␊
    > react-scripts start␊
    ␊
    ◈ Command failed with exit code *: npm start. Shutting down Netlify Dev server`
