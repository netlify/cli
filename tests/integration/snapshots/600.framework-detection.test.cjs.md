# Snapshot report for `tests/integration/600.framework-detection.test.cjs`

The actual snapshot is saved in `600.framework-detection.test.cjs.snap`.

Generated by [AVA](https://avajs.dev).

## should default to process.cwd() and static server

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ No app server detected. Using simple static serverâŠ
    â—ˆ Unable to determine public folder to serve files from. Using current working directoryâŠ
    â—ˆ Setup a netlify.toml file with a [dev] section to specify your dev server settings.âŠ
    â—ˆ See docs at: https://cli.netlify.com/netlify-dev#project-detectionâŠ
    â—ˆ Running static server from "site-with-index-file"âŠ
    â—ˆ Setting up local development serverâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`

## should use static server when --dir flag is passed

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Using simple static server because '--dir' flag was specifiedâŠ
    â—ˆ Running static server from "site-with-index-file/public"âŠ
    â—ˆ Setting up local development serverâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`

## should use static server when framework is set to #static

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Using simple static server because '[dev.framework]' was set to '#static'âŠ
    â—ˆ Unable to determine public folder to serve files from. Using current working directoryâŠ
    â—ˆ Setup a netlify.toml file with a [dev] section to specify your dev server settings.âŠ
    â—ˆ See docs at: https://cli.netlify.com/netlify-dev#project-detectionâŠ
    â—ˆ Running static server from "site-with-index-file"âŠ
    â—ˆ Setting up local development serverâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`

## should log the command if using static server and `command` is configured

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Using simple static server because '--dir' flag was specifiedâŠ
    â—ˆ Running static server from "site-with-index-file/public"âŠ
    â—ˆ Setting up local development serverâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`

## should warn if using static server and `targetPort` is configured

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Using simple static server because '--dir' flag was specifiedâŠ
    â—ˆ Ignoring 'targetPort' setting since using a simple static server.âŠ
    â—ˆ Use --staticServerPort or [dev.staticServerPort] to configure the static server portâŠ
    â—ˆ Running static server from "site-with-index-file/public"âŠ
    â—ˆ Setting up local development serverâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`

## should run `command` when both `command` and `targetPort` are configured

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with custom configâŠ
    helloâŠ
    â—ˆ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should force a specific framework when configured

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with Create React AppâŠ
    â—ˆ Failed running command: react-scripts start. Please verify 'react-scripts' exists`

## should throw when forcing a non supported framework

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Invalid framework "to-infinity-and-beyond-js". It should be one of: *`

## should detect a known framework

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with Create React AppâŠ
    âŠ
    > startâŠ
    > react-scripts startâŠ
    âŠ
    â—ˆ Command failed with exit code *: npm run start. Shutting down Netlify Dev server`

## should throw if framework=#custom but command is missing

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should throw if framework=#custom but targetPort is missing

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should start custom command if framework=#custom, command and targetPort are configured

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with #customâŠ
    helloâŠ
    â—ˆ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should print specific error when command doesn't exist

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Unable to determine public folder to serve files from. Using current working directoryâŠ
    â—ˆ Setup a netlify.toml file with a [dev] section to specify your dev server settings.âŠ
    â—ˆ See docs at: https://cli.netlify.com/netlify-dev#project-detectionâŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with #customâŠ
    â—ˆ Failed running command: oops-i-did-it-again forgot-to-use-a-valid-command. Please verify 'oops-i-did-it-again' exists`

## should prompt when multiple frameworks are detected

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    ? Multiple possible dev commands found (Use arrow keys or type to search)âŠ
    > [Gatsby] 'npm run develop' âŠ
      [Create React App] 'npm run start' [2A[37D[73C[2B[2K[1A[2K[1A[2K[G? Multiple possible dev commands found âŠ
      [Gatsby] 'npm run develop' âŠ
    > [Create React App] 'npm run start' [2A[37D[39C[2B[2K[1A[2K[1A[2K[G? Multiple possible dev commands found Create React App-npm run start[69D[69CâŠ
    âŠ
    Update your netlify.toml to avoid this selection prompt next time:âŠ
    âŠ
    [build]âŠ
    command = "react-scripts build"âŠ
    publish = "build"âŠ
    âŠ
    [dev]âŠ
    command = "npm run start"âŠ
    âŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with Create React AppâŠ
    âŠ
    > startâŠ
    > react-scripts startâŠ
    âŠ
    â—ˆ Command failed with exit code *: npm run start. Shutting down Netlify Dev server`

## should not run framework detection if command and targetPort are configured

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ Unable to determine public folder to serve files from. Using current working directoryâŠ
    â—ˆ Setup a netlify.toml file with a [dev] section to specify your dev server settings.âŠ
    â—ˆ See docs at: https://cli.netlify.com/netlify-dev#project-detectionâŠ
    â—ˆ Setting up local development serverâŠ
    â—ˆ Starting Netlify Dev with custom configâŠ
    helloâŠ
    â—ˆ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should filter frameworks with no dev command

> Snapshot 1

    `â—ˆ Netlify Dev â—ˆâŠ
    â—ˆ No app server detected. Using simple static serverâŠ
    â—ˆ Unable to determine public folder to serve files from. Using current working directoryâŠ
    â—ˆ Setup a netlify.toml file with a [dev] section to specify your dev server settings.âŠ
    â—ˆ See docs at: https://cli.netlify.com/netlify-dev#project-detectionâŠ
    â—ˆ Running static server from "site-with-gulp"âŠ
    â—ˆ Setting up local development serverâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`

## should run and serve a production build when using the `serve` command

> Snapshot 1

    `[project.ts]: detectFrameworksâŠ
    [project.ts]: detectBuildSystemâŠ
    [project.ts]: detectWorkspacesâŠ
    [project.ts]: detectPackageManagerâŠ
    [project.ts]: detectFrameworksInPath - undefinedâŠ
    â—ˆ Injected netlify.toml file env var: CONTEXT_CHECKâŠ
    â—ˆ Using simple static server because '[dev.framework]' was set to '#static'âŠ
    â—ˆ Running static server from "site-with-framework/public"âŠ
    â—ˆ Building site for productionâŠ
    â—ˆ Changes will not be hot-reloaded, so if you need to rebuild your site you must exit and run 'netlify serve' againâŠ
    â€‹âŠ
    Netlify Build                                                 âŠ
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âŠ
    â€‹âŠ
    > VersionâŠ
      @netlify/build 0.0.0âŠ
    â€‹âŠ
    > FlagsâŠ
      configPath:/file/pathâŠ
      cwd:/file/pathâŠ
      debug: trueâŠ
      edgeFunctionsBootstrapURL: https://650bfd807b21ed888883e25c--edge.netlify.com/bootstrap/index-combined.tsâŠ
      mode: cliâŠ
      offline: trueâŠ
      outputConfigPath:/file/pathâŠ
      saveConfig: trueâŠ
    â€‹âŠ
    > Current directoryâŠ
     /file/pathâŠ
    â€‹âŠ
    > Config fileâŠ
     /file/pathâŠ
    â€‹âŠ
    > Resolved configâŠ
      build:âŠ
        environment:âŠ
          - CONTEXT_CHECKâŠ
        publish:/file/pathâŠ
        publishOrigin: configâŠ
      functionsDirectory:/file/pathâŠ
      plugins:âŠ
        - inputs: {}âŠ
          origin: configâŠ
          package:/file/pathâŠ
    â€‹âŠ
    > ContextâŠ
      productionâŠ
    â€‹âŠ
    > Loading pluginsâŠ
       -/file/path from netlify.tomlâŠ
    â€‹âŠ
    /file/path (onPreBuild event)                      âŠ
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âŠ
    â€‹âŠ
    Netlify configuration property "functions.directory" value changed to 'new_functions'.âŠ
    Netlify configuration property "redirects" value changed to [ { from: /file/path', to: /file/path' } ].âŠ
    â€‹âŠ
    > Updated configâŠ
      build:âŠ
        environment:âŠ
          - CONTEXT_CHECKâŠ
        publish:/file/pathâŠ
        publishOrigin: configâŠ
      functionsDirectory:/file/pathâŠ
      plugins:âŠ
        - inputs: {}âŠ
          origin: configâŠ
          package:/file/pathâŠ
      redirects:âŠ
        - from:/file/pathâŠ
          to:/file/pathâŠ
      redirectsOrigin: inlineâŠ
    â€‹âŠ
    /file/path onPreBuild completed in Xms)âŠ
    Build step duration:/file/path onPreBuild completed in XmsâŠ
    â€‹âŠ
    Functions bundling                                            âŠ
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âŠ
    â€‹âŠ
    Packaging Functions from new_functions directory:âŠ
     - hello.jsâŠ
    â€‹âŠ
    â€‹âŠ
    (Functions bundling completed in Xms)âŠ
    Build step duration: Functions bundling completed in XmsâŠ
    â€‹âŠ
    Save deploy artifacts                                         âŠ
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âŠ
    â€‹âŠ
    â€‹âŠ
    > Uploaded configâŠ
      [build]âŠ
      publish = "public"âŠ
    â€‹âŠ
      [context]âŠ
    â€‹âŠ
        [context.dev]âŠ
    â€‹âŠ
          [context.dev.environment]âŠ
          CONTEXT_CHECK = "DEV"âŠ
    â€‹âŠ
        [context.production]âŠ
    â€‹âŠ
          [context.production.environment]âŠ
          CONTEXT_CHECK = "PRODUCTION"âŠ
    â€‹âŠ
      [functions]âŠ
      directory = "functions"âŠ
    â€‹âŠ
      [[plugins]]âŠ
      package = /file/path"âŠ
    â€‹âŠ
    > Uploaded headersâŠ
      No headersâŠ
    â€‹âŠ
    > Uploaded redirectsâŠ
      No redirectsâŠ
    â€‹âŠ
    â€‹âŠ
    (Save deploy artifacts completed in Xms)âŠ
    Build step duration: Save deploy artifacts completed in XmsâŠ
    â€‹âŠ
    Netlify Build Complete                                        âŠ
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âŠ
    â€‹âŠ
    (Netlify Build completed in Xms)âŠ
    Build step duration: Netlify Build completed in XmsâŠ
    âŠ
    â—ˆ Static server listening to 88888âŠ
    â—ˆ Extracted function hello from/file/pathâŠ
    â—ˆ Functions server is listening on 88888âŠ
    â—ˆ Loaded function helloâŠ
    âŠ
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”âŠ
       â”‚                                                  â”‚âŠ
       â”‚   â—ˆ Server now ready on http://localhost:88888   â”‚âŠ
       â”‚                                                  â”‚âŠ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
