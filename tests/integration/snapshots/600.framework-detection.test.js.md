# Snapshot report for `tests/integration/600.framework-detection.test.js`

The actual snapshot is saved in `600.framework-detection.test.js.snap`.

Generated by [AVA](https://avajs.dev).

## should default to process.cwd() and static server

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ No app server detected. Using simple static server␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-index-file"␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/d8617cea-13f5-4b63-8f39-dfb13a236c2d/site-with-index-file␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ␊
    ◈ Static server listening to 88888␊
    ​␊
    (dev.command completed in 6ms)␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use static server when --dir flag is passed

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '--dir' flag was specified␊
    ◈ Running static server from "site-with-index-file/public"␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/888882e4-48e0-4219-99fc-cfb19eac7737/site-with-index-file␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ␊
    ◈ Static server listening to 88888␊
    ​␊
    (dev.command completed in 6ms)␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use static server when framework is set to #static

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '[dev.framework]' was set to '#static'␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-index-file"␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/a4e2d501-17ac-4708-9e05-cd5cf4d330f2/site-with-index-file␊
    ​␊
    > Config file␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/a4e2d501-17ac-4708-9e05-cd5cf4d330f2/site-with-index-file/netlify.toml␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ␊
    ◈ Static server listening to 88888␊
    ​␊
    (dev.command completed in 7ms)␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should log the command if using static server and `command` is configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '--dir' flag was specified␊
    ◈ Running static server from "site-with-index-file/public"␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/efdd3f84-b142-4f8e-87e7-58c4cbedc5f4/site-with-index-file␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ␊
    ◈ Static server listening to 88888␊
    ​␊
    (dev.command completed in 112ms)␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should warn if using static server and `targetPort` is configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '--dir' flag was specified␊
    ◈ Ignoring 'targetPort' setting since using a simple static server.␊
    ◈ Use --staticServerPort or [dev.staticServerPort] to configure the static server port␊
    ◈ Running static server from "site-with-index-file/public"␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/3bda0104-e874-4211-aab3-88888e888885/site-with-index-file␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ␊
    ◈ Static server listening to 88888␊
    ​␊
    (dev.command completed in 5ms)␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should run `command` when both `command` and `targetPort` are configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/faabba61-fb9a-4aa4-b988-78b76d18f722/empty-site␊
    ​␊
    > Config file␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/faabba61-fb9a-4aa4-b988-78b76d18f722/empty-site/netlify.toml␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with custom config␊
    hello␊
    ◈ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should force a specific framework when configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/596ee433-4fbb-40f6-9d89-a40b5c88888e/site-with-mocked-cra␊
    ​␊
    > Config file␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/596ee433-4fbb-40f6-9d89-a40b5c88888e/site-with-mocked-cra/netlify.toml␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with Create React App␊
    ◈ Failed running command: react-scripts start. Please verify 'react-scripts' exists`

## should throw when forcing a non supported framework

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Invalid framework "to-infinity-and-beyond-js". It should be one of: *`

## should detect a known framework

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/cce88888-f7f7-4c3d-bf29-15cce0b500a4/site-with-cra␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with Create React App␊
    ␊
    > start␊
    > react-scripts start␊
    ␊
    ◈ Command failed with exit code *: npm run start. Shutting down Netlify Dev server`

## should throw if framework=#custom but command is missing

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should throw if framework=#custom but targetPort is missing

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should start custom command if framework=#custom, command and targetPort are configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/3ab27c57-4bcb-4b02-80ca-3c01ef0140f1/site-with-custom-framework␊
    ​␊
    > Config file␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/3ab27c57-4bcb-4b02-80ca-3c01ef0140f1/site-with-custom-framework/netlify.toml␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with #custom␊
    hello␊
    ◈ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should print specific error when command doesn't exist

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/88888137-603e-4b7b-8a51-5e99e1d3c8a8/site-with-custom-framework␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with #custom␊
    ◈ Failed running command: oops-i-did-it-again forgot-to-use-a-valid-command. Please verify 'oops-i-did-it-again' exists`

## should prompt when multiple frameworks are detected

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ? Multiple possible start commands found (Use arrow keys or type to search)␊
    > [Gatsby] 'npm run develop' ␊
      [Create React App] 'npm run start' [2A[37D[75C[2B[2K[1A[2K[1A[2K[G? Multiple possible start commands found ␊
      [Gatsby] 'npm run develop' ␊
    > [Create React App] 'npm run start' [2A[37D[41C[2B[2K[1A[2K[1A[2K[G? Multiple possible start commands found Create React App-npm run start[71D[71C␊
    Add 'framework = "create-react-app"' to the [dev] section of your netlify.toml to avoid this selection prompt next time␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/0ab0aa77-6564-4ada-b695-59a2f9ec7fd1/site-with-multiple-frameworks␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with Create React App␊
    ␊
    > start␊
    > react-scripts start␊
    ␊
    ◈ Command failed with exit code *: npm run start. Shutting down Netlify Dev server`

## should not run framework detection if command and targetPort are configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/012d1578-112b-4119-a8a5-8888888888f0/site-with-hugo-config␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with custom config␊
    hello␊
    ◈ "echo hello" exited with code *. Shutting down Netlify Dev server`

## should filter frameworks with no dev command

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ No app server detected. Using simple static server␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-gulp"␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/de9a2f48-557b-4cce-9147-9a888888585c/site-with-gulp␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ␊
    ◈ Static server listening to 88888␊
    ​␊
    (dev.command completed in 6ms)␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should pass framework-info env to framework sub process

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Setting up local development server␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 27.14.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
      /private/var/folders/z9/c3br8lxj1sjc12qkzfcmsm8m0000gn/T/netlify-cli-tests-v16.14.0/88888/d6e8dc5f-c30f-47a4-8d8a-0610f8888819/site-with-gatsby␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    > Installing plugins␊
       - @netlify/plugin-gatsby@3.4.1␊
    ​␊
    > Loading plugins␊
       - @netlify/plugin-gatsby@3.4.1 from netlify.toml␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    ◈ Starting Netlify Dev with Gatsby␊
    ␊
    > develop␊
    > node -p process.env.GATSBY_LOGGER␊
    ␊
    yurnalist␊
    ◈ "npm run develop" exited with code *. Shutting down Netlify Dev server`
